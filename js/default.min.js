"use strict";function Security(){}Security.getCSRFToken=function(b,a){if(a==undefined){a=known.currentPageUrl}$.ajax({type:"GET",data:{url:a},url:known.config.displayUrl+"service/security/csrftoken/"}).done(function(d,e,c){b(d.token,d.time)})};Security.refreshTokens=function(){$(".known-security-token").each(function(){var a=$(this).closest("form");Security.getCSRFToken(function(b,c){a.find("input[name=__bTk]").val(b);a.find("input[name=__bTs]").val(c)},a.find("input[name=__bTa]").val())})};setInterval(function(){Security.refreshTokens()},300000);Security.activateACLControls=function(){$(".acl-ctrl-option").each(function(){if($(this).data("acl")==$(this).closest(".access-control-block").find("input").val()){$(this).closest(".btn-group").find(".dropdown-toggle").html($(this).html()+' <span class="caret"></span>')}});$(".acl-ctrl-option").on("click",function(){$(this).closest(".access-control-block").find("input").val($(this).data("acl"));$(this).closest(".btn-group").find(".dropdown-toggle").html($(this).html()+' <span class="caret"></span>');$(this).closest(".btn-group").find(".dropdown-toggle").click()})};$(document).ready(function(){Security.activateACLControls()});function Logger(){}Logger.log=function(a,b){if(typeof b==="undefined"){b="INFO"}switch(b.toUpperCase()){case"ALERT":case"ERROR":case"EXCEPTION":b="ERROR";console.error(b+": "+a);break;case"WARN":case"WARNING":b="WARNING";console.warn(b+": "+a);break;default:b="INFO";console.log(b+": "+a)}Security.getCSRFToken(function(c,d){$.ajax({type:"POST",data:{level:b,message:a,__bTk:c,__bTs:d},url:known.config.displayUrl+"service/system/log/",})},known.config.displayUrl+"service/system/log/")};Logger.info=function(a){Logger.log(a,"INFO")};Logger.warn=function(a){Logger.log(a,"WARN")};Logger.error=function(a){Logger.log(a,"ERROR")};Logger.deprecated=function(a){Logger.info("DEPRECATED "+a)};Logger.errorHandler=function(b){var a=b.error.stack;var c=b.error.toString();if(a){c+="\n"+a}console.error(b);Logger.log(c,"ERROR")};window.addEventListener("error",function(a){Logger.errorHandler(a)});function Notifications(){}Notifications.poll=function(){$.get(known.config.displayUrl+"service/notifications/new-notifications").done(function(d){if(d.notifications){if(d.notifications.length>0){for(i=0;i<d.notifications.length;i++){var h=d.notifications[i].title;var a=d.notifications[i].body;var b=d.notifications[i].icon;var c=d.notifications[i].link;try{var g=new Notification(h,{icon:b,body:a,data:c});g.onclick=function(j){window.location.href=c}}catch(f){}}}}}).fail(function(a){})};Notifications.enable=function(a){if(!known.session.loggedIn){return}if(!("Notification" in window)){console.log("The Notification API is not supported by this browser");return}self.addEventListener("notificationclick",function(b){window.location.href=b.notification.data});if(Notification.permission!=="denied"&&Notification.permission!=="granted"&&!a){Notification.requestPermission(function(b){if(b==="granted"){setInterval(Notifications.poll,30000)}})}else{if(Notification.permission==="granted"){setInterval(Notifications.poll,30000)}}};Notifications.isEnabled=function(){if(!known.session.loggedIn){return false}if(!("Notification" in window)){console.log("The Notification API is not supported by this browser");return false}if(Notification.permission==="granted"){return true}return false};function doPoll(){Notifications.poll()}$(document).ready(function(){if(Notifications.isEnabled()){Notifications.enable(true)}});function wwwroot(){return known.config.displayUrl}function isLoggedIn(){if(typeof known!=="undefined"){if(known.session.loggedIn){return true}}return false}$(document).ready(function(){var a=$("#soft-forward").attr("href");if(!!a){window.location=a}if(known.session.loggedIn){}});